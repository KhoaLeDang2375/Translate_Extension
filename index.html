<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>eJOY Advanced Translation</title>
    <link rel="stylesheet" href="popup.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</head>
<body>
    <div class="translation-popup">
        <!-- Header -->
        <div class="header">
            <div class="header-left">
                <div class="app-icon"></div>
                <span class="app-title">eJOY Translation</span>
            </div>
            <div class="header-right">
                <button class="settings-btn" id="settingsBtn">‚öôÔ∏è</button>
            </div>
        </div>

        <!-- Tab Navigation -->
        <div class="tab-nav">
            <button id="advancedTab" class="tab-btn active">
                üîÑ Advanced translation
            </button>
            <button id="dictionaryTab" class="tab-btn">
                üìñ Dictionary
            </button>
        </div>

        <!-- Main Content -->
        <div class="content">
            <!-- Language Selection -->
            <div class="lang-section">
                <select id="sourceLang" class="lang-select">
                    <option value="auto">Auto Detect</option>
                    <option value="en">English</option>
                    <option value="vi">Vietnamese</option>
                    <option value="ja">Japanese</option>
                </select>
                
                <button id="swapBtn" class="swap-btn">üîÑ</button>
                
                <select id="targetLang" class="lang-select">
                    <option value="vi">Vietnamese</option>
                    <option value="en">English</option>
                    <option value="ja">Japanese</option>
                </select>
            </div>

            <!-- Action Buttons -->
            <div class="action-buttons">
                <button id="translateBtn" class="translate-btn">Translate</button>
                  <button id="aiExplainBtn"
                            class="ai-btn"
                            data-bs-toggle="collapse"
                            data-bs-target="#contextBox"
                            aria-expanded="false"
                            aria-controls="contextBox">
                        ‚ú® AI Explain
                 </button>
                <button id="aiSummary" class="ai-btn">AI Summary</button>
            </div>
            <!-- H·ªôp nh·∫≠p ng·ªØ c·∫£nh (·∫©n m·∫∑c ƒë·ªãnh) -->
            <div class="collapse" id="contextBox">
            <div class="card card-body">
                <label for="contextInput" class="form-label">Nh·∫≠p ng·ªØ c·∫£nh cho AI:</label>
                <textarea id="contextInput"
                        class="form-control"
                        rows="4"
                        placeholder="VD: vƒÉn b·∫£n thu·ªôc lƒ©nh v·ª±c y t·∫ø‚Ä¶"></textarea>

             
                <button id="sendToAI" class="btn btn-primary mt-2">G·ª≠i t·ªõi AI</button>
            </div>
            </div>
            <!-- Source Text Area -->
            <div class="text-section">
                <div class="section-header">
                    <span class="section-title">Source text</span>
                    <div class="section-actions">
                        <div class ="player-container">
                             <button class="action-btn" id="speakSourceBtn" title="Speak">üîä Play</button>
                             <audio id = "player-source"></audio>
                        </div>
                        
                        <button class="action-btn" id="copySourceBtn" title="Copy"><i class="fas fa-copy"></i></button>
                        <button class="action-btn" id="pasteBtn" title="Paste"><i class="fas fa-paste"></i></button>
                    </div>
                </div>
                <textarea
                    id="sourceText"
                    class="text-area"
                    placeholder="Enter text to translate or select text on webpage..."
                    rows="4"
                ></textarea>
                <div class="char-counter">
                    <span id="charCount">0/500</span>
                </div>
                <script>
                    const txt = document.querySelector("#sourceText");
                    const wc  = document.getElementById('charCount');

                    function updateWordCount() {
                        const value = txt.value.trim();
                        const words = value ? value.split(/\s+/).length : 0;
                        wc.textContent = words + "/500";
                        if(words >= 500){
                            wc.style.color='red';
                        }
                        else{
                            wc.style.color='#6B7280';
                        }
                    }

                    txt.addEventListener('input', updateWordCount);
                    updateWordCount(); // Kh·ªüi t·∫°o ban ƒë·∫ßu
                    </script>
            </div>

            <!-- Translation Area -->
            <div class="text-section">
                <div class="section-header">
                    <span class="section-title">Translation</span>
                    <div class="section-actions">
                        <div class="player-container">
                            <button class="action-btn" id="speakTransBtn" title="Speak">üîä Play</button>
                            <audio src="" id = "player-trans"></audio>
                        </div>
                        
                        <button class="action-btn" id="copyTransBtn" title="Copy"><i class="fas fa-copy"></i></button>
                    </div>
                </div>
                <!-- Provider Tabs -->
                <!-- Tabs -->
            <div id="providerTabs" class="provider-tabs">
                <button class="provider-tab active" data-target="translatedText">Translated Text</button>
                <button class="provider-tab" data-target="aiExplainText">AI Explain Result</button>
                <button class="provider-tab" data-target="aiSummaryText">AI Summary Result</button>
                </div>

                <!-- Textareas (c√°c panel t∆∞∆°ng ·ª©ng) -->
                <textarea
                id="translatedText"
                class="text-area provider-panel"
                placeholder="Translation will appear here..."
                rows="4"
                readonly
                ></textarea>

                <textarea
                id="aiExplainText"
                class="text-area provider-panel"
                placeholder="Explain will appear here..."
                rows="4"
                readonly
                hidden
                ></textarea>

                <textarea
                id="aiSummaryText"
                class="text-area provider-panel"
                placeholder="Summary will appear here..."
                rows="4"
                readonly
                hidden
                ></textarea>
            </div>

            <!-- Quick Actions -->
            <div class="quick-actions">
                <button id="detectBtn" class="quick-btn">üîç Detect Selected Text</button>
                <button id="historyBtn" class="quick-btn">üìö History</button>
            </div>
        </div>
        <!-- Tab translated  -->
        <div class="dictionary-content">
        <div class="search-container">
            <div class="input-container">
                <input type="text" name="text" class="input" placeholder="search...">
                <button class="search-btn">
                    <span class="icon"> 
                    <svg width="19px" height="19px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <path opacity="1" d="M14 5H20" stroke="#000" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path> <path opacity="1" d="M14 8H17" stroke="#000" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path> <path d="M21 11.5C21 16.75 16.75 21 11.5 21C6.25 21 2 16.75 2 11.5C2 6.25 6.25 2 11.5 2" stroke="#000" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"></path> <path opacity="1" d="M22 22L20 20" stroke="#000" stroke-width="3.5" stroke-linecap="round" stroke-linejoin="round"></path> </g></svg>
                    </span>
                </button>
            </div>
            <select id="sourceLang" class="lang-select">
                    <option value="auto">Auto Detect</option>
                    <option value="en">English</option>
                    <option value="vi">Vietnamese</option>
                    <option value="ja">Japanese</option>
             </select>
        </div>
        <section class="word-container" style="margin-bottom: 0px; ">
            <div class="word-content" style="display: none;">
                <div class="word-raw">
                    <p>violent</p>
                </div>
                <div class="word-pron" style="display: flex; align-items: center; flex-wrap: wrap;">
                    <!-- 1. VƒÉn b·∫£n -->
                <span class="dict-item__word">US</span>
                <!-- 2. N√∫t ph√°t √¢m -->
                <button class="dict-item__audio-btn" type="button" aria-label="Ph√°t √¢m">
                    <i class="fas fa-volume-up"></i>
                </button>

                <!-- 3. Phi√™n √¢m -->
                <span class="dict-item__pronun">[Ààva…™…ô.l…ônt]</span>
                </div>
                <!-- 2. Nghƒ©a -->
                <div class="dict-card__section">
                    <span class="dict-card__label">Nghƒ©a:</span>
                    <p class="dict-card__meaning">Mang t√≠nh b·∫°o l·ª±c, s·ª≠ d·ª•ng s·ª©c m·∫°nh ƒë·ªÉ g√¢y t·ªïn th∆∞∆°ng ho·∫∑c ph√° ho·∫°i.</p>
                </div>

                <!-- 3. V√≠ d·ª• -->
                <div class="dict-card__section">
                    <span class="dict-card__label">V√≠ d·ª•:</span>
                    <p class="dict-card__example"><em>The protest turned violent after dark.</em></p>
                </div>

                <!-- 4. T·ª´ ƒë·ªìng nghƒ©a -->
                <div class="dict-card__section">
                    <span class="dict-card__label">T·ª´ ƒë·ªìng nghƒ©a:</span>
                    <ul class="dict-card__list">
                    <li>aggressive</li>
                    <li>brutal</li>
                    <li>fierce</li>
                    </ul>
                </div>

                <!-- 5. T·ª´ tr√°i nghƒ©a -->
                <div class="dict-card__section">
                    <span class="dict-card__label">T·ª´ tr√°i nghƒ©a:</span>
                    <ul class="dict-card__list">
                    <li>peaceful</li>
                    <li>gentle</li>
                    <li>calm</li>
                    </ul>
                </div>
            </div>
        </section>
        </div>
        <!-- Footer -->
        <div class="footer">
            <span class="footer-text">Powered by eJOY AI</span>
        </div>
    </div>

    <script src="popup.js"></script>
    <script src="dictionary.js"></script>
    
</body>
</html>


